---
import { Image } from 'astro:assets';
import Badge from '@/components/ui/Badge.astro';
import { formatDate } from '@/utils/formatDate';
import type { CollectionEntry } from 'astro:content';

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const { title, description, date, cover, categories, readingTime } = post.data;
---

<article class="glass-card group overflow-hidden transition duration-300 hover:-translate-y-1 hover:border-accent-primary/40" data-reveal>
  {cover && (
    <a href={`/blog/${post.slug}`} class="relative block aspect-video overflow-hidden">
      <Image src={cover} alt={title} width={1200} height={675} class="h-full w-full object-cover transition duration-500 group-hover:scale-105" loading="lazy" />
      <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"></div>
    </a>
  )}

  <div class="space-y-4 p-6">
    <div class="flex flex-wrap items-center gap-2 text-xs text-text-secondary">
      <time datetime={date.toISOString()}>{formatDate(date)}</time>
      {readingTime && <span>{readingTime} min lectura</span>}
    </div>

    <div class="flex flex-wrap gap-1.5">
      {categories.slice(0, 3).map((cat) => (
        <Badge text={cat} variant="accent" />
      ))}
    </div>

    <h3 class="font-heading text-2xl font-bold leading-tight transition group-hover:text-accent-primary">
      <a href={`/blog/${post.slug}`}>{title}</a>
    </h3>

    <p class="text-sm text-text-secondary">{description}</p>

    <a href={`/blog/${post.slug}`} class="inline-flex items-center gap-1 text-sm font-semibold text-accent-primary hover:underline">
      Leer m√°s
      <svg class="h-3.5 w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" /></svg>
    </a>
  </div>
</article>
